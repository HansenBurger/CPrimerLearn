# 4. 复合类型

## 4.1 数组

数组(array)

1. 定义: 是一种数据格式，能够存储多个同类型的值
2. 特征: 每个值都存储在一个独立的数组元素中，计算机在内存中依次存储数组的各个元素。
3. 声明必要: 1.存储类型，2.数组名，3.元素个数

> 数组的元素之间连续排布，不存在空隙

数组声明示例:

```c++
typeName arrayName[arraySize];
```

arraySize可以写成多种形式，但必定是确定的大小(常量)

数组根据下标对数组中的元素进行访问:

![array_index](https://cdn.programiz.com/sites/tutorial2program/files/cpp-array-empty-members.png)

> 编译器不会检查下标有效，运行时会出现问题

如果将sizeof运算符用于数组名，得到的将是整个数组中的字节数

### 4.1.1 数组初始化规则

1. 只有**在定义数组时才能使用初始化**，即只能在定义时初始化，不能先定义再初始化。
2. 如果对数组的部分初始化，那会对后续的元素全部置0。
3. 声明长度为空，可以根据初始化的长度自动确定

### 4.1.2 数组初始化方法

1. 可以省略等号
2. 初始化 {} 为空，会全部置0
3. 无法缩窄(long数组存不了double变量)

## 4.2 字符串

两种类型:

1. C-style string
2. string 类库

字符数组和字符串:

1. 字符串的结尾要用 **空字符('\0')** 来表示，字符串和字符数组都可以用数组表示，区别就在于有无空字符。
2. 对于用字符数组表示的字符串，输出到'\0'停止，对于单纯的字符数组，一直输出全部字符，直到内存中遇到'\0'结束。
3. 声明可以直接用双引号括起字符串，这种字符串被称为字符串常量（string constant）或字符串字面值（string literal）
4. cin 输入字符串时，也是存入字符数组，**并补充空字符**。

> 在确定存储字符串所需的最短数组时，需将结尾的空字符计算在内。对于数组长度大于字符串长度时，会在字符后自动补空字节

**补充**：'' 和 ""不能混用，"S" = {'S', '\0'} = 字符串内存地址，不能给char类型变量。

### 4.2.1 拼接字符串

```c++
char s1[6] = {'H','e','l','l','o','\0'}
char s2[6] = {'W','o','r','l','d','\0'}
char s1s2[11] = {'H','e','l','l','o','W','o','r','l','d','\0'}
```

第一个字符串的空字符被第二个取代

### 4.2.2 数组中使用字符串

1. sizeof 计算的是字符数组的长度
2. \<cstring\> 库中的strlen只计算可见字符的长度(不包括'\0')

### 4.2.3 字符串输入

对于cin类，空白字符(space, enter)，对于"Alistair Dreeb":

1. "Alistair'\space'Dreeb'\Enter'"
2. 遇到'\space'，将"Alistair"存入字符数组，"Dreeb'\Enter'"放入缓冲区
3. 再次遇到输入，会接着从缓冲区读取
